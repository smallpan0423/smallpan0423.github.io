<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>小潘的筆記</title>
  <style>
    body { margin:0; background-color:#DCB5FF; font-family:system-ui,-apple-system,"Noto Sans TC",sans-serif; }
    .center { text-align:center; margin: 1.5rem 0; }
    .downloads { max-width: 900px; margin: 0 auto; padding: 0 1rem; list-style: none; }
    .downloads li { margin: .6rem 0; }
    .updated { color:#444; opacity:.85; margin-left:.5rem; font-size:.95rem; }
    .filters.center { margin-top: .5rem; }
    .tag {
      display:inline-block; margin:.25rem; padding:.4rem .8rem; border-radius:999px;
      border:1px solid rgba(0,0,0,.15); background:#fff; cursor:pointer;
    }
    .tag.active { background:#6c5ce7; color:#fff; border-color:#6c5ce7; }
    .hidden { display:none !important; }
  </style>
</head>
<body>

  <h2 class="center">嗨我是小潘，歡迎來到我的個人網站，這裡可以找到關於我的物理學筆記、鋼琴樂譜、參考書</h2>

  <!-- 分類按鈕 -->
  <nav class="filters center" aria-label="檔案分類">
    <button class="tag active" data-cat="all">全部</button>
    <button class="tag" data-cat="em">四大力學筆記</button>
    <button class="tag" data-cat="math">數學筆記</button>
    <button class="tag" data-cat="thesis">畢業論文</button>
    <button class="tag" data-cat="misc">其他</button>
  </nav>

  <!-- 檔案清單 -->
  <ul class="downloads" id="fileList">
    <li data-folder="em">
      <a href="downloads/Classical-Electrodynamics.pdf" target="_blank" rel="noopener">
        《古典電磁學（更新中）》PDF
      </a>
      <span class="updated"
            data-repo-path="downloads/Classical-Electrodynamics.pdf"
            data-file="downloads/Classical-Electrodynamics.pdf">（更新查詢中…）</span>
    </li>

    <li data-folder="thesis">
      <a href="downloads/master.pdf" target="_blank" rel="noopener">
        《碩士論文》PDF
      </a>
      <span class="updated"
            data-repo-path="downloads/master.pdf"
            data-file="downloads/master.pdf">（更新查詢中…）</span>
    </li>
  </ul>



  
 <script>
  // 如果 workflow 把檔案寫在 docs/，把下面改成 'docs/updates.json'
  const UPDATES_URL = 'updates.json';

  const fmt = new Intl.DateTimeFormat('zh-TW', {
    dateStyle:'medium', timeStyle:'short', hour12:false, timeZone:'Asia/Taipei'
  });

  fetch(UPDATES_URL, { cache: 'no-store' })
    .then(r => r.json())
    .then(map => {
      document.querySelectorAll('.updated[data-repo-path]').forEach(el => {
        const path = el.dataset.repoPath;     // 這裡要寫「repo 裡的真實路徑」
        const iso  = map[path];
        if (iso) {
          el.textContent = `（更新：${fmt.format(new Date(iso))}）`;
        } else {
          el.textContent = '（未找到時間）';
          console.warn('updates.json 中沒有這個路徑：', path);
        }
      });
    })
    .catch(err => {
      console.error('載入 updates.json 失敗', err);
      document.querySelectorAll('.updated[data-repo-path]').forEach(el => {
        el.textContent = '（更新時間取得失敗）';
      });
    });
</script>




</body>
</html>
