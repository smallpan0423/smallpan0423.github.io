<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>背景顏色示範</title>
  <style>
    /* 去掉預設白邊，讓背景覆蓋整頁 */
    body { margin:0; background-color:#DCB5FF; }
    .center { text-align:center; margin: 2rem 0; }
  </style>
</head>
<!-- <body>
  <p class="center">嗨我是小潘，歡迎來到我的個人網站，在這裡可以找到關於我的物理學筆記、鋼琴樂譜、參考書</p>

  <p class="center">
    <a href="downloads/Classical-Electrodynamic.pdf"
      target="_blank" rel="noopener">
      線上預覽《古典電磁學（更新中）》PDF
    </a>
  </p>

  <p id="last-updated" class="center"></p>

<script>
  // 取伺服器回報的檔案最後修改時間
  const ts = new Date(document.lastModified);

  // 以台北時間、中文格式顯示（想用使用者本地時間就拿掉 timeZone 這行）
  const text = new Intl.DateTimeFormat('zh-TW', {
    dateStyle: 'medium',
    timeStyle: 'short',
    hour12: false,
    timeZone: 'Asia/Taipei'
  }).format(ts);

  document.getElementById('last-updated').textContent = `最後更新：${text}`;
</script>

</body> -->

  <body>
  <style>
    .center { text-align:center; margin: 2rem 0; }
    .downloads { max-width: 800px; margin: 0 auto; }
    .downloads li { margin: .5rem 0; }
    .updated { color: #444; opacity:.8; font-size:.95rem; margin-left:.5rem; }
  </style>

  <h2 class="center">可下載/預覽檔案</h2>

  <ul class="downloads">
    <li>
      <a href="downloads/Classical-Electrodynamic.pdf"
         target="_blank" rel="noopener">
        線上預覽《古典電磁學（更新中）》PDF
      </a>
      <span class="updated" data-file="downloads/Classical-Electrodynamic.pdf">（更新查詢中…）</span>
    </li>

    <!-- 之後新增檔案就複製下面這個 li，改兩個地方的路徑即可 -->
    <!--
    <li>
      <a href="downloads/another-file.pdf" target="_blank" rel="noopener">預覽 another-file.pdf</a>
      <span class="updated" data-file="downloads/another-file.pdf">（更新查詢中…）</span>
    </li>
    -->
  </ul>

  <script>
    // 將 data-file 指向的檔案做 HEAD，讀取 Last-Modified
    const tz = 'Asia/Taipei';
    const fmt = new Intl.DateTimeFormat('zh-TW', {
      dateStyle: 'medium', timeStyle: 'short', hour12: false, timeZone: tz
    });

    document.querySelectorAll('.updated[data-file]').forEach(async (el) => {
      const url = el.getAttribute('data-file');
      try {
        const res = await fetch(url, { method: 'HEAD', cache: 'no-store' });
        const lm = res.headers.get('last-modified');
        if (lm) {
          const d = new Date(lm);
          el.textContent = `（更新：${fmt.format(d)}）`;
        } else {
          el.textContent = ''; // 沒有標頭就不顯示
        }
      } catch (e) {
        el.textContent = '';   // 失敗就不顯示
      }
    });
  </script>
</body>

</html>
